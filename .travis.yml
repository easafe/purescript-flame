language: node_js
node_js:
  - 13
install:
  - npm install -g spago parcel-bundler
  - TAG=v0.14.1
  - curl --location --output $HOME/purescript.tar.gz https://github.com/purescript/purescript/releases/download/$TAG/linux64.tar.gz
  - tar -xvf $HOME/purescript.tar.gz -C $HOME/
  - chmod a+x $HOME/purescript
script:
  - npm install
  - spago build
  - spago test
  - spago -x examples.dhall build
  - npm run build-examples
  - cd benchmarks/js-framework-benchmark/keyed
  - npm run build
  - cd ../non-keyed
  - npm run build
